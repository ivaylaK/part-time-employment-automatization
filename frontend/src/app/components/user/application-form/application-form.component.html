<body *ngIf="token || id; else invalid">
<h4 class="mb-2">Application Form</h4>

<form [formGroup]="form" (ngSubmit)="onSubmit()">
  <div class="row g-2">
    <div class="col-sm-6">
      <label class="form-label">First Name</label>
      <input class="form-control" formControlName="firstName" />
    </div>
    <div class="col-sm-6">
      <label class="form-label">Last Name</label>
      <input class="form-control" formControlName="lastName" />
    </div>
    <div class="col-sm-6">
      <label class="form-label">Phone Number</label>
      <input class="form-control" formControlName="number" />
    </div>
    <div class="col-sm-6">
      <label class="form-label">City</label>
      <input class="form-control" formControlName="city" />
    </div>
  </div>

  <div *ngIf="job" class="mt-3">
    <strong>Период на смяната:</strong>
    {{ job.startDate | date:'mediumDate' }} – {{ job.endDate | date:'mediumDate' }}
  </div>

  <h5 class="mt-3">Изберете дати</h5>
  <!-- Little header that always shows the visible month/year -->
  <div class="mb-2 text-secondary fw-semibold text-capitalize" *ngIf="currentView">
    {{ monthLabel }}
  </div>

  <ngb-datepicker
    *ngIf="minDate && maxDate"
    [startDate]="minDate"
    [minDate]="minDate"
    [maxDate]="maxDate"
    [outsideDays]="'hidden'"
    [displayMonths]="1"
    [navigation]="'arrows'"
    [markDisabled]="markDisabled"
    (navigate)="onNavigate($event.next)"
    (select)="onDateSelection($event)"
    [dayTemplate]="t">
  </ngb-datepicker>

  <ng-template #t let-date="date" let-disabled="disabled" let-currentMonth="currentMonth">
  <span
    class="d-inline-block w-100 h-100 text-center rounded"
    [class.bg-primary]="isSelected(date) && !disabled"
    [class.text-white]="isSelected(date) && !disabled"
    [class.text-muted]="date.month !== currentMonth"
    [class.opacity-50]="disabled">
    {{ date.day }}
  </span>
  </ng-template>


  <div class="mt-2" *ngIf="selectedDates.length">
    <small class="text-muted">Избрани: {{ chosenDaysIso.join(', ') }}</small>
  </div>

  <button type="submit" class="btn btn-primary mt-3">Apply</button>
</form>
</body>

<ng-template #invalid>
  <p>Invalid or expired invitation. Please request a new link.</p>
</ng-template>
